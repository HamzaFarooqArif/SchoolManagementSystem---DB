@model IEnumerable<WebApplication1.Course>

@{
    ViewBag.Title = "Create";
}



<h2>Create</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal">
        @Html.ActionLink("Create New", "Create", "Batch")
        @*<div class="dropdown">

            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                --Select Course--
                <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
                <li><a href="#">Item1</a></li>
                <li><a href="#">Item2</a></li>
                <li><a href="#">Item3</a></li>
            </ul>
        </div>*@
        <select id="Batch" class="form-control">
            <option></option>
        </select>
        <br>
        <select id="Semester" class="form-control">
            <option></option>
        </select>
        <br />
        <select id="Course" class="form-control">
            <option></option>
        </select>
        <div class="form-group">
            <div class="col-md-10">
                <input type="submit" value="Submit" class="btn btn-default" />
            </div>
        </div>
    </div>
}


@section Scripts{
    <script type="text/javascript">
        $(document).ready(function (e){
            var d = {};
            d.url = '@Url.Action("LoadBatches", "Semester")';
            d.type = "POST";
            d.dataType = "json";
            d.contentType = "application/json";
            d.success = function (r) {
                $("#Batch").empty();
                $("#Batch").prepend("option value='' selected='selected'></option>");
                for (var i = 0; i < r.length; i++) {
                    $("#Batch").append('<option value="' + r[i].ID + '">' + r[i].Name + '</option>');
                }
            };
            $.ajax(d);
        });
    </script>
<script type="text/javascript">
        $(document).ready(function (e){
            var d = {};
            d.url = '@Url.Action("LoadCourses", "Semester")';
            d.type = "POST";
            d.dataType = "json";
            d.contentType = "application/json";
            d.success = function (r) {
                $("#Course").empty();
                $("#Course").prepend("option value='' selected='selected'></option>");
                for (var i = 0; i < r.length; i++) {
                    $("#Course").append('<option value="' + r[i].ID + '">' + r[i].Name + '</option>');
                }
            };
            $.ajax(d);
        });
</script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#Batch").change(function () {
                debugger;
                event.preventDefault();
                var selectedValue = $("#Batch").select();
                var $url = '/Semester/LoadSemester';
                //alert($url);

                $.ajax({
                    url: $url,
                    type: 'POST',
                    datatype: "json",
                    data: "Item=" + $("#Batch option:selected").val(),
                    success: function (r) {
                        $("#Semester").empty();
                        $("#Semester").prepend("option value='' selected='selected'></option>");
                        for (var i = 0; i < r.length; i++) {
                            $("#Semester").append('<option value="' + r[i].ID + '">' + r[i].Name + '</option>');
                        }
                    }
                });
            });
        });
    </script>
}
